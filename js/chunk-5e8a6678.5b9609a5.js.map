{"version":3,"sources":["webpack:///./src/views/UserEdit.vue?40b5","webpack:///./src/views/UserEdit.vue?6b8a","webpack:///src/views/UserEdit.vue","webpack:///./src/views/UserEdit.vue?d89a","webpack:///./src/views/UserEdit.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","on","$event","stopPropagation","preventDefault","handlePutUser","domProps","name","directives","rawName","value","expression","target","composing","introduction","staticClass","style","backgroundImage","avatar","staticStyle","handleFileChange","_v","_s","currentUser","followingUserId","length","followerUserId","id","staticRenderFns","data","computed","methods","imageURL","created","component"],"mappings":"gHAAA,yBAAue,EAAG,G,gECA1e,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,cAAc,CAACF,EAAG,OAAO,CAACE,MAAM,CAAC,QAAU,uBAAuBC,GAAG,CAAC,OAAS,SAASC,GAAyD,OAAjDA,EAAOC,kBAAkBD,EAAOE,iBAAwBV,EAAIW,cAAcH,MAAW,CAACJ,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,SAAS,CAACF,EAAG,MAAM,CAACA,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,OAAO,GAAK,OAAO,KAAO,OAAO,SAAW,IAAIM,SAAS,CAAC,MAAQZ,EAAIa,QAAQT,EAAG,WAAW,CAACU,WAAW,CAAC,CAACD,KAAK,QAAQE,QAAQ,UAAUC,MAAOhB,EAAgB,aAAEiB,WAAW,iBAAiBX,MAAM,CAAC,KAAO,eAAe,GAAK,eAAe,KAAO,IAAI,UAAY,KAAK,SAAW,IAAIM,SAAS,CAAC,MAASZ,EAAgB,cAAGO,GAAG,CAAC,MAAQ,SAASC,GAAWA,EAAOU,OAAOC,YAAqBnB,EAAIoB,aAAaZ,EAAOU,OAAOF,aAAYZ,EAAG,QAAQ,CAACiB,YAAY,iBAAiBC,MAAM,CAAGC,gBAAiB,OAASvB,EAAIwB,OAAS,KAAOlB,MAAM,CAAC,IAAM,QAAQ,GAAK,oBAAoB,CAACF,EAAG,QAAQ,CAACiB,YAAY,oBAAoBI,YAAY,CAAC,QAAU,QAAQnB,MAAM,CAAC,GAAK,QAAQ,KAAO,OAAO,KAAO,QAAQ,OAAS,WAAWC,GAAG,CAAC,OAASP,EAAI0B,oBAAoBtB,EAAG,oBAAoB,CAACE,MAAM,CAAC,KAAO,CAAC,MAAO,UAAU,GAAK,aAAa,KAAKF,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,WAAW,CAACF,EAAG,OAAO,CAACJ,EAAI2B,GAAG3B,EAAI4B,GAAG5B,EAAI6B,YAAYC,gBAAgBC,QAAQ,gBAAgB3B,EAAG,OAAO,CAACJ,EAAI2B,GAAG3B,EAAI4B,GAAG5B,EAAI6B,YAAYG,eAAeD,QAAQ,kBAAkB3B,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,YAAY,CAACF,EAAG,SAAS,CAACiB,YAAY,kBAAkBf,MAAM,CAAC,KAAO,WAAW,CAACN,EAAI2B,GAAG,UAAUvB,EAAG,cAAc,CAACiB,YAAY,oBAAoBf,MAAM,CAAC,GAAK,UAAYN,EAAI6B,YAAYI,GAAG,GAAK,WAAW,CAACjC,EAAI2B,GAAG,eAAe,QAC/mDO,EAAkB,G,svBCuDtB,OACErB,KAAM,WACNsB,KAFF,WAGI,MAAO,CACLtB,KAAM,GACNO,aAAc,GACdI,OAAQ,KAGZY,SAAU,EAAZ,GACA,mDAEEC,QAAS,CACP,cADJ,SACA,GADA,8GAGA,WACA,kBAJA,kCAKA,8BALA,gBAKA,EALA,EAKA,KACA,uBACA,gCACA,gDACA,oCACA,aACA,eACA,oBAEA,0DAdA,qDAiBA,aACA,eACA,0BAnBA,0DAuBIX,iBAvBJ,SAuBA,GACM,IAAN,iBACA,mCACMzB,KAAKuB,OAASc,IAGlBC,QAzCF,WA0CItC,KAAKY,KAAOZ,KAAK4B,YAAYhB,KAC7BZ,KAAKmB,aAAenB,KAAK4B,YAAYT,aACrCnB,KAAKuB,OAASvB,KAAK4B,YAAYL,SCpG+S,I,wBCQ9UgB,EAAY,eACd,EACAzC,EACAmC,GACA,EACA,KACA,WACA,MAIa,aAAAM,E","file":"js/chunk-5e8a6678.5b9609a5.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserEdit.vue?vue&type=style&index=0&id=1772a2a4&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserEdit.vue?vue&type=style&index=0&id=1772a2a4&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"user-edit\"}},[_c('form',{attrs:{\"enctype\":\"multipart/form-data\"},on:{\"submit\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.handlePutUser($event)}}},[_c('div',{attrs:{\"id\":\"info\"}},[_c('div',[_c('input',{attrs:{\"name\":\"name\",\"id\":\"name\",\"type\":\"text\",\"required\":\"\"},domProps:{\"value\":_vm.name}}),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.introduction),expression:\"introduction\"}],attrs:{\"name\":\"introduction\",\"id\":\"introduction\",\"rows\":\"2\",\"maxlength\":\"50\",\"required\":\"\"},domProps:{\"value\":(_vm.introduction)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.introduction=$event.target.value}}})]),_c('label',{staticClass:\"rounded-circle\",style:({ backgroundImage: 'url(' + _vm.avatar + ')' }),attrs:{\"for\":\"image\",\"id\":\"image-container\"}},[_c('input',{staticClass:\"form-control-file\",staticStyle:{\"display\":\"none\"},attrs:{\"id\":\"image\",\"type\":\"file\",\"name\":\"image\",\"accept\":\"image/*\"},on:{\"change\":_vm.handleFileChange}}),_c('font-awesome-icon',{attrs:{\"icon\":['fas', 'camera'],\"id\":\"camera\"}})],1)]),_c('div',{attrs:{\"id\":\"follow\"}},[_c('span',[_vm._v(_vm._s(_vm.currentUser.followingUserId.length)+\" Following\")]),_c('span',[_vm._v(_vm._s(_vm.currentUser.followerUserId.length)+\" Followers\")])]),_c('div',{attrs:{\"id\":\"buttons\"}},[_c('button',{staticClass:\"btn btn-success\",attrs:{\"type\":\"submit\"}},[_vm._v(\"Save\")]),_c('router-link',{staticClass:\"btn btn-secondary\",attrs:{\"to\":'/users/' + _vm.currentUser.id,\"id\":\"cancel\"}},[_vm._v(\" Cancel \")])],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div id=\"user-edit\">\r\n    <form @submit.stop.prevent=\"handlePutUser\" enctype=\"multipart/form-data\">\r\n      <div id=\"info\">\r\n        <div>\r\n          <input name=\"name\" id=\"name\" type=\"text\" :value=\"name\" required />\r\n          <textarea\r\n            v-model=\"introduction\"\r\n            name=\"introduction\"\r\n            id=\"introduction\"\r\n            rows=\"2\"\r\n            maxlength=\"50\"\r\n            required\r\n          >\r\n          </textarea>\r\n        </div>\r\n        <label\r\n          for=\"image\"\r\n          id=\"image-container\"\r\n          class=\"rounded-circle\"\r\n          v-bind:style=\"{ backgroundImage: 'url(' + avatar + ')' }\"\r\n        >\r\n          <input\r\n            id=\"image\"\r\n            type=\"file\"\r\n            name=\"image\"\r\n            accept=\"image/*\"\r\n            class=\"form-control-file\"\r\n            @change=\"handleFileChange\"\r\n            style=\"display:none\"\r\n          />\r\n          <font-awesome-icon :icon=\"['fas', 'camera']\" id=\"camera\" />\r\n        </label>\r\n      </div>\r\n      <div id=\"follow\">\r\n        <span>{{ currentUser.followingUserId.length }} Following</span>\r\n        <span>{{ currentUser.followerUserId.length }} Followers</span>\r\n      </div>\r\n      <div id=\"buttons\">\r\n        <button type=\"submit\" class=\"btn btn-success\">Save</button>\r\n        <router-link\r\n          :to=\"'/users/' + currentUser.id\"\r\n          class=\"btn btn-secondary\"\r\n          id=\"cancel\"\r\n        >\r\n          Cancel\r\n        </router-link>\r\n      </div>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from 'vuex'\r\nimport { Toast } from './../utils/helpers'\r\nimport usersAPI from './../apis/user'\r\nexport default {\r\n  name: 'UserEdit',\r\n  data() {\r\n    return {\r\n      name: '',\r\n      introduction: '',\r\n      avatar: ''\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState(['currentUser', 'isAuthenticated'])\r\n  },\r\n  methods: {\r\n    async handlePutUser(e) {\r\n      try {\r\n        const form = e.target\r\n        const formData = new FormData(form)\r\n        const { data } = await usersAPI.putUser({ formData })\r\n        if (data.status === 'success') {\r\n          this.currentUser.name = this.name\r\n          this.currentUser.introduction = this.introduction\r\n          this.currentUser.avatar = this.avatar\r\n          Toast.fire({\r\n            icon: 'success',\r\n            title: '個人資訊修改成功！'\r\n          })\r\n          this.$router.push(`/users/${this.currentUser.id}`)\r\n        }\r\n      } catch (error) {\r\n        Toast.fire({\r\n          icon: 'success',\r\n          title: '無法取得個人資訊，請稍後再試！'\r\n        })\r\n      }\r\n    },\r\n    handleFileChange(e) {\r\n      const files = e.target.files\r\n      const imageURL = window.URL.createObjectURL(files[0])\r\n      this.avatar = imageURL\r\n    }\r\n  },\r\n  created() {\r\n    this.name = this.currentUser.name\r\n    this.introduction = this.currentUser.introduction\r\n    this.avatar = this.currentUser.avatar\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\nlabel {\r\n  margin: 0;\r\n  cursor: pointer;\r\n  background-repeat: no-repeat;\r\n  background-position: center;\r\n  background-size: 150px;\r\n}\r\na {\r\n  text-decoration: none;\r\n  color: #fff;\r\n}\r\na:hover {\r\n  color: inherit;\r\n}\r\n#camera {\r\n  font-size: 50px;\r\n  margin: 25px;\r\n  color: #666;\r\n  opacity: 0.7;\r\n}\r\n\r\n#camera:hover {\r\n  color: #000;\r\n}\r\n\r\ntextarea,\r\ninput {\r\n  border: none;\r\n  width: 100%;\r\n}\r\ntextarea:focus,\r\ninput:focus {\r\n  outline: none;\r\n}\r\n\r\n#image-container {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n#user-edit {\r\n  margin: 0 auto;\r\n  padding: 0 20px 20px 20px;\r\n  width: 640px;\r\n}\r\n\r\n#info {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n#name {\r\n  font-size: 32px;\r\n  font-weight: bold;\r\n}\r\n\r\n#introduction {\r\n  font-size: 24px;\r\n}\r\n\r\n#avatar {\r\n  width: 100px;\r\n  height: 100px;\r\n  border: 2px solid #ccc;\r\n}\r\n\r\n#follow span,\r\n#buttons button {\r\n  margin-right: 8px;\r\n}\r\n\r\n#buttons {\r\n  margin-top: 8px;\r\n}\r\n\r\n#buttons button,\r\n#cancel {\r\n  padding-left: 18px;\r\n  padding-right: 18px;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserEdit.vue?vue&type=template&id=1772a2a4&scoped=true&\"\nimport script from \"./UserEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./UserEdit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserEdit.vue?vue&type=style&index=0&id=1772a2a4&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1772a2a4\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}