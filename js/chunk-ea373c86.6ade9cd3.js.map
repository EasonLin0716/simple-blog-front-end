{"version":3,"sources":["webpack:///./src/views/user/User.vue?54ea","webpack:///./src/components/UserPosts.vue?c56d","webpack:///src/components/UserPosts.vue","webpack:///./src/components/UserPosts.vue?9dda","webpack:///./src/components/UserPosts.vue","webpack:///src/views/user/User.vue","webpack:///./src/views/user/User.vue?03cd","webpack:///./src/views/user/User.vue","webpack:///./src/components/UserPosts.vue?038b"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","posts","user","clapCount","on","afterHandleBookmark","afterHandleUnbookmark","afterHandleClap","staticRenderFns","_v","_l","post","index","key","id","avatar","_s","name","monthDay","readTime","cover","title","domProps","content","clappedTime","isClapped","class","clapHands","handleClap","_e","directives","rawName","value","expression","clapping","clap","isBookmarked","isLoading","handleBookmark","handleUnbookmark","props","type","Array","required","Object","Number","data","computed","mounted","setTimeout","mojsAnimation","clapEffect","methods","$emit","postId","postid","component","components","UserPosts","clapTimer","isAuthenticated","$store","dispatch","idx","icon"],"mappings":"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","file":"js/chunk-ea373c86.6ade9cd3.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"user__posts\",attrs:{\"id\":\"profile\"}},[_c('UserPosts',{attrs:{\"posts\":_vm.posts,\"user\":_vm.user,\"clapCount\":_vm.clapCount},on:{\"after-handle-bookmark\":_vm.afterHandleBookmark,\"after-handle-unbookmark\":_vm.afterHandleUnbookmark,\"after-handle-clap\":_vm.afterHandleClap}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"user-posts\"}},[_c('h5',{attrs:{\"id\":\"latest\"}},[_vm._v(\"Latest\")]),_vm._l((_vm.posts),function(post,index){return _c('div',{key:post.id},[_c('div',{staticClass:\"card\"},[_c('div',{attrs:{\"id\":\"info\"}},[_c('div',{attrs:{\"id\":\"user-info\"}},[_c('div',[_c('img',{staticClass:\"rounded-circle size-mid\",attrs:{\"src\":_vm.user.avatar,\"alt\":\"\",\"id\":\"avatar\"}})]),_c('div',[_c('h6',[_vm._v(_vm._s(_vm.user.name))]),_c('span',[_vm._v(\" \"+_vm._s(post.monthDay)+\" • \"+_vm._s(post.readTime)+\" \")])])]),_c('div',{attrs:{\"id\":\"post-info\"}},[_c('div',{attrs:{\"id\":\"cover\"}},[_c('router-link',{attrs:{\"to\":'/posts/' + post.id,\"id\":\"post-link\"}},[_c('img',{attrs:{\"src\":post.cover,\"alt\":\"cover\"}})])],1),_c('div',{attrs:{\"id\":\"content\"}},[_c('h2',[_vm._v(_vm._s(post.title))]),_c('article',{domProps:{\"innerHTML\":_vm._s(post.content)}})]),_c('div',{attrs:{\"id\":\"icons\"}},[_c('div',{attrs:{\"id\":\"claps\"}},[(post.clappedTime && post.isClapped)?[(post.clappedTime && post.isClapped)?_c('button',{class:'clap ind' + index},[_c('img',{staticClass:\"icon\",attrs:{\"src\":_vm.clapHands,\"alt\":\"clap\",\"data-postId\":post.id},on:{\"click\":_vm.handleClap}})]):_vm._e(),_c('span',[_vm._v(\" \"+_vm._s(post.clappedTime))]),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(post.clapping),expression:\"post.clapping\"}],staticClass:\"rounded-circle size-mid\",class:'clap-count ind' + index},[_vm._v(\" \"+_vm._s(post.clapping)+\" \")])]:(post.clappedTime)?[_c('button',{class:'clap ind' + index},[_c('img',{staticClass:\"icon\",attrs:{\"src\":_vm.clap,\"alt\":\"clap\",\"data-postId\":post.id},on:{\"click\":_vm.handleClap}})]),_vm._v(\" \"+_vm._s(post.clappedTime)+\" \"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(post.clapping),expression:\"post.clapping\"}],class:'clap-count ind' + index},[_vm._v(_vm._s(post.clapping))])]:[_c('button',{class:'clap ind' + index},[_c('img',{staticClass:\"icon\",attrs:{\"src\":_vm.clap,\"alt\":\"clap\",\"data-postId\":post.id},on:{\"click\":_vm.handleClap}})]),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(post.clapping),expression:\"post.clapping\"}],class:'clap-count ind' + index},[_vm._v(_vm._s(post.clapping))])]],2),_c('font-awesome-icon',{directives:[{name:\"show\",rawName:\"v-show\",value:(!post.isBookmarked),expression:\"!post.isBookmarked\"}],staticClass:\"icon icon-mid\",attrs:{\"data-postId\":post.id,\"icon\":['far', 'bookmark'],\"disabled\":_vm.isLoading},on:{\"click\":_vm.handleBookmark}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(post.isBookmarked),expression:\"post.isBookmarked\"}],attrs:{\"data-postId\":post.id}},[_c('font-awesome-icon',{staticClass:\"icon icon-mid\",attrs:{\"icon\":['fas', 'bookmark'],\"disabled\":_vm.isLoading},on:{\"click\":_vm.handleUnbookmark}})],1)],1)])])])])})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div id=\"user-posts\">\r\n    <h5 id=\"latest\">Latest</h5>\r\n    <div v-for=\"(post, index) in posts\" :key=\"post.id\">\r\n      <div class=\"card\">\r\n        <div id=\"info\">\r\n          <div id=\"user-info\">\r\n            <div>\r\n              <img\r\n                :src=\"user.avatar\"\r\n                class=\"rounded-circle size-mid\"\r\n                alt=\"\"\r\n                id=\"avatar\"\r\n              />\r\n            </div>\r\n            <div>\r\n              <h6>{{ user.name }}</h6>\r\n              <span>\r\n                {{ post.monthDay }}&nbsp;&bull;&nbsp;{{ post.readTime }}\r\n              </span>\r\n            </div>\r\n          </div>\r\n          <div id=\"post-info\">\r\n            <div id=\"cover\">\r\n              <router-link :to=\"'/posts/' + post.id\" id=\"post-link\">\r\n                <img :src=\"post.cover\" alt=\"cover\" />\r\n              </router-link>\r\n            </div>\r\n            <div id=\"content\">\r\n              <h2>{{ post.title }}</h2>\r\n              <article v-html=\"post.content\">\r\n                <!-- {{ post.content }} -->\r\n              </article>\r\n            </div>\r\n            <div id=\"icons\">\r\n              <!-- claps -->\r\n              <div id=\"claps\">\r\n                <template v-if=\"post.clappedTime && post.isClapped\">\r\n                  <button\r\n                    v-if=\"post.clappedTime && post.isClapped\"\r\n                    :class=\"'clap ind' + index\"\r\n                  >\r\n                    <img\r\n                      @click=\"handleClap\"\r\n                      :src=\"clapHands\"\r\n                      alt=\"clap\"\r\n                      :data-postId=\"post.id\"\r\n                      class=\"icon\"\r\n                    />\r\n                  </button>\r\n                  <span>&nbsp;{{ post.clappedTime }}</span>\r\n                  <span\r\n                    v-show=\"post.clapping\"\r\n                    class=\"rounded-circle size-mid\"\r\n                    :class=\"'clap-count ind' + index\"\r\n                  >\r\n                    {{ post.clapping }}\r\n                  </span>\r\n                </template>\r\n                <template v-else-if=\"post.clappedTime\">\r\n                  <button :class=\"'clap ind' + index\">\r\n                    <img\r\n                      @click=\"handleClap\"\r\n                      :src=\"clap\"\r\n                      alt=\"clap\"\r\n                      :data-postId=\"post.id\"\r\n                      class=\"icon\"\r\n                    />\r\n                  </button>\r\n                  &nbsp;{{ post.clappedTime }}\r\n                  <span\r\n                    v-show=\"post.clapping\"\r\n                    :class=\"'clap-count ind' + index\"\r\n                    >{{ post.clapping }}</span\r\n                  >\r\n                </template>\r\n                <template v-else>\r\n                  <button :class=\"'clap ind' + index\">\r\n                    <img\r\n                      @click=\"handleClap\"\r\n                      :src=\"clap\"\r\n                      alt=\"clap\"\r\n                      :data-postId=\"post.id\"\r\n                      class=\"icon\"\r\n                    />\r\n                  </button>\r\n                  <span\r\n                    v-show=\"post.clapping\"\r\n                    :class=\"'clap-count ind' + index\"\r\n                    >{{ post.clapping }}</span\r\n                  >\r\n                </template>\r\n              </div>\r\n              <!-- bookmark -->\r\n              <font-awesome-icon\r\n                v-show=\"!post.isBookmarked\"\r\n                :data-postId=\"post.id\"\r\n                :icon=\"['far', 'bookmark']\"\r\n                class=\"icon icon-mid\"\r\n                @click=\"handleBookmark\"\r\n                :disabled=\"isLoading\"\r\n              />\r\n              <div v-show=\"post.isBookmarked\" :data-postId=\"post.id\">\r\n                <font-awesome-icon\r\n                  :icon=\"['fas', 'bookmark']\"\r\n                  class=\"icon icon-mid\"\r\n                  @click=\"handleUnbookmark\"\r\n                  :disabled=\"isLoading\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from 'vuex'\r\nconst mojsAnimation = require('../utils/mojsAnimation')\r\nexport default {\r\n  name: 'UserPosts',\r\n  props: {\r\n    posts: {\r\n      type: Array,\r\n      required: true\r\n    },\r\n    user: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n    clapCount: {\r\n      type: Number,\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      clap: require('../../static/images/clap.svg'),\r\n      clapHands: require('../../static/images/clap-hands.svg'),\r\n      isLoading: false\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState(['currentUser', 'isAuthenticated'])\r\n  },\r\n  mounted() {\r\n    setTimeout(() => {\r\n      const claps = this.$el.querySelectorAll('.clap')\r\n      for (let i = 0; i < claps.length; i++) {\r\n        const clap = claps[i]\r\n        mojsAnimation.clapEffect(clap, `.clap.ind${i}`, `.clap-count.ind${i}`)\r\n      }\r\n    }, 1000)\r\n  },\r\n  methods: {\r\n    handleBookmark(e) {\r\n      this.isLoading = true\r\n      const { postId } =\r\n        e.target.tagName === 'path'\r\n          ? e.target.parentNode.dataset\r\n          : e.target.dataset\r\n      this.$emit('after-handle-bookmark', postId)\r\n      this.isLoading = false\r\n    },\r\n    handleUnbookmark(e) {\r\n      this.isLoading = true\r\n      const postId =\r\n        e.target.parentNode.parentNode.dataset.postid ||\r\n        e.target.parentNode.dataset.postid\r\n      this.$emit('after-handle-unbookmark', postId)\r\n      this.isLoading = false\r\n    },\r\n    handleClap(e) {\r\n      const { postid } = e.target.dataset\r\n      this.$emit('after-handle-clap', postid)\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n@import '../assets/sass/_variables.scss';\r\n@import '../assets/sass/mixins.scss';\r\n#info {\r\n  padding: 25px;\r\n}\r\n\r\n#latest {\r\n  margin-top: 30px;\r\n}\r\n\r\n#cover {\r\n  height: 189px;\r\n  overflow: hidden;\r\n  margin: 20px 0 10px 0;\r\n}\r\n\r\n#post-link img {\r\n  transform: translateY(-25%);\r\n}\r\n\r\n#icons {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin-top: 15px;\r\n}\r\n\r\n#icons img {\r\n  width: 25px;\r\n  height: 25px;\r\n}\r\n\r\n#user-info {\r\n  display: flex;\r\n}\r\n\r\n#user-info div {\r\n  margin-right: 10px;\r\n}\r\n\r\n#user-info span {\r\n  color: rgb(120, 120, 120);\r\n  font-size: $text-small;\r\n}\r\n\r\n#claps {\r\n  position: relative;\r\n}\r\n\r\n.clap-count {\r\n  @include clap-count-effect(30px, -10px);\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserPosts.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserPosts.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserPosts.vue?vue&type=template&id=5acfff0e&scoped=true&\"\nimport script from \"./UserPosts.vue?vue&type=script&lang=js&\"\nexport * from \"./UserPosts.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserPosts.vue?vue&type=style&index=0&id=5acfff0e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5acfff0e\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div id=\"profile\" class=\"user__posts\">\r\n    <UserPosts\r\n      :posts=\"posts\"\r\n      :user=\"user\"\r\n      :clapCount=\"clapCount\"\r\n      @after-handle-bookmark=\"afterHandleBookmark\"\r\n      @after-handle-unbookmark=\"afterHandleUnbookmark\"\r\n      @after-handle-clap=\"afterHandleClap\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport replyAPI from '@/apis/replies'\r\nimport UserPosts from '@/components/UserPosts'\r\nimport { Toast } from '@/utils/helpers'\r\nimport { mapState } from 'vuex'\r\nexport default {\r\n  name: 'User',\r\n  components: {\r\n    UserPosts\r\n  },\r\n  props: {\r\n    user: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n    posts: {\r\n      type: Array,\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      isLoading: false,\r\n      clapCount: 0,\r\n      clapTimer: null\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState(['currentUser', 'isAuthenticated'])\r\n  },\r\n  methods: {\r\n    afterHandleBookmark(postId) {\r\n      if (!this.isAuthenticated) {\r\n        Toast.fire({\r\n          icon: 'info',\r\n          title: '請登入來使用此功能！'\r\n        })\r\n        return\r\n      }\r\n      this.$store.dispatch('addBookmark', postId)\r\n      const idx = this.posts.map(d => d.id).indexOf(+postId)\r\n      this.posts[idx].isBookmarked = true\r\n    },\r\n    afterHandleUnbookmark(postId) {\r\n      this.$store.dispatch('deleteBookmark', postId)\r\n      const idx = this.posts.map(d => d.id).indexOf(+postId)\r\n      this.posts[idx].isBookmarked = false\r\n    },\r\n    async afterHandleClap(postId) {\r\n      if (this.clapTimer) {\r\n        clearTimeout(this.clapTimer)\r\n      }\r\n      const postIdArray = this.posts.map(d => d.id)\r\n      const ind = postIdArray.indexOf(Number(postId))\r\n      this.clapCount += 1\r\n      this.posts[ind].clappedTime += 1\r\n      this.posts[ind].clapping += 1\r\n      this.clapTimer = setTimeout(async () => {\r\n        try {\r\n          this.isLoading = true\r\n          const clapInfo = {\r\n            clapCount: this.clapCount\r\n          }\r\n          const { data } = await replyAPI.clap(postId, clapInfo)\r\n          if (data.status === 'success') {\r\n            Toast.fire({\r\n              icon: 'success',\r\n              title: '鼓掌成功!!'\r\n            })\r\n            this.posts[ind].isClapped = true\r\n          }\r\n          this.clapCount = 0\r\n          this.posts[ind].clapping = 0\r\n          this.$forceUpdate()\r\n          this.isLoading = false\r\n        } catch (error) {\r\n          Toast.fire({\r\n            icon: 'error',\r\n            title: '無法鼓掌，請稍後再試！'\r\n          })\r\n        }\r\n      }, 2000)\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./User.vue?vue&type=template&id=327cfbe8&\"\nimport script from \"./User.vue?vue&type=script&lang=js&\"\nexport * from \"./User.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserPosts.vue?vue&type=style&index=0&id=5acfff0e&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserPosts.vue?vue&type=style&index=0&id=5acfff0e&lang=scss&scoped=true&\""],"sourceRoot":""}