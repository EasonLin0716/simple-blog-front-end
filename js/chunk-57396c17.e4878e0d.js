(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-57396c17"],{"21bf":function(e,t,r){},"25f0":function(e,t,r){"use strict";var a=r("6eeb"),s=r("825a"),n=r("d039"),i=r("ad6d"),c="toString",o=RegExp.prototype,p=o[c],l=n((function(){return"/a/b"!=p.call({source:"a",flags:"b"})})),u=p.name!=c;(l||u)&&a(RegExp.prototype,c,(function(){var e=s(this),t=String(e.source),r=e.flags,a=String(void 0===r&&e instanceof RegExp&&!("flags"in o)?i.call(e):r);return"/"+t+"/"+a}),{unsafe:!0})},"6f81":function(e,t,r){e.exports=r.p+"img/clap.e11e3ce9.svg"},"9d58":function(e,t,r){"use strict";var a=r("21bf"),s=r.n(a);s.a},ad6d:function(e,t,r){"use strict";var a=r("825a");e.exports=function(){var e=a(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},b0c6:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"reply"}},[r("section",{staticClass:"box-mid",attrs:{id:"post-info"}},[r("h6",[e._v("Show responses for:")]),r("div",{staticClass:"card",attrs:{id:"post"}},[r("div",{staticClass:"d-flex justify-content-between",attrs:{id:"title"}},[r("p",{staticClass:"m-0"},[e._v(e._s(e.postTitle))]),r("div",[r("img",{attrs:{src:e.clapHands,alt:"clap",id:"clap"}}),r("span",[e._v(e._s(e.clapTimes))]),r("font-awesome-icon",{attrs:{icon:["fas","comment"],id:"comment"}}),r("span",[e._v(e._s(e.replyTimes))])],1)]),r("span",{attrs:{id:"author"}},[e._v(e._s(e.author))])])]),r("section",{attrs:{id:"reply-info"}},[e._m(0),r("div",{attrs:{id:"reply-place"}},[r("form",{on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.handlePostReply(t)}}},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.replyTextarea,expression:"replyTextarea"}],staticClass:"form-control",attrs:{name:"replyTextarea",id:"replyTextarea",cols:"30",rows:"3",placeholder:"Write a response..."},domProps:{value:e.replyTextarea},on:{input:function(t){t.target.composing||(e.replyTextarea=t.target.value)}}}),r("button",{staticClass:"btn btn-success mt-2",attrs:{type:"submit"}},[e._v("Publish")])])]),e._l(e.replies,(function(t){return r("div",{key:t.id,staticClass:"card",attrs:{id:"replies"}},[r("div",{attrs:{id:"info"}},[r("img",{staticClass:"rounded-circle size-small-mid",attrs:{src:t.avatar,alt:"avatar"}}),r("div",[r("span",{attrs:{id:"replier"}},[e._v(e._s(t.replier))]),r("br"),r("span",{attrs:{id:"month-day"}},[e._v(e._s(t.monthDay))])])]),r("div",{attrs:{id:"content"}},[e._v(" "+e._s(t.content)+" ")])])}))],2)])},s=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"responses"}},[r("h6",[e._v("Responses")])])}],n=(r("a4d3"),r("4de4"),r("d81d"),r("fb6a"),r("b0c0"),r("e439"),r("dbb4"),r("b64b"),r("d3b7"),r("25f0"),r("159b"),r("ade3")),i=(r("96cf"),r("513f")),c=r("2f62"),o=r("2fa3");function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){Object(n["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var u={name:"Replies",data:function(){return{postId:0,clap:r("6f81"),clapHands:r("c7f1"),replies:[],postTitle:"",author:"",clapTimes:null,replyTimes:null,replyTextarea:""}},methods:{fetchReplies:function(e){var t,r,a;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,regeneratorRuntime.awrap(i["a"].getReplies({postId:e}));case 3:if(t=s.sent,r=t.data,a=t.statusText,"OK"===a){s.next=8;break}throw new Error(a);case 8:this.postId=r.post.id,this.postTitle=r.post.title,this.author=r.post.User.name,this.clapTimes=r.post.clapTimes,this.replyTimes=r.replies.length,this.replies=r.replies.map((function(e){return{id:e.id,content:e.content,monthDay:e.monthDay,replier:e.User.name,avatar:e.User.avatar}})),s.next=19;break;case 16:s.prev=16,s.t0=s["catch"](0),o["a"].fire({icon:"error",title:"無法取得回覆，請稍後再試！"});case 19:case"end":return s.stop()}}),null,this,[[0,16]])},handlePostReply:function(){var e,t;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:if(r.prev=0,this.isAuthenticated){r.next=4;break}return o["a"].fire({icon:"info",title:"請登入來使用此功能！"}),r.abrupt("return");case 4:if(this.replyTextarea){r.next=6;break}return r.abrupt("return");case 6:return r.next=8,regeneratorRuntime.awrap(i["a"].postReply({content:this.replyTextarea,postId:this.postId,id:this.currentUser.id}));case 8:e=r.sent,t=e.data,this.replies.push({content:this.replyTextarea,monthDay:(new Date).toString().slice(4,7)+" "+(new Date).toString().slice(8,10),replier:this.currentUser.name,avatar:this.currentUser.avatar}),this.replyTextarea="","success"===t.status&&o["a"].fire({icon:"success",title:"回復文章成功!!"}),r.next=18;break;case 15:r.prev=15,r.t0=r["catch"](0),o["a"].fire({icon:"error",title:"無法回復文章，請稍後再試！"});case 18:case"end":return r.stop()}}),null,this,[[0,15]])}},computed:l({},Object(c["b"])(["currentUser"])),created:function(){var e=this.$route.params.id;this.fetchReplies(e)},beforeRouteUpdate:function(e,t,r){var a=e.params.id;this.fetchReplies(a),r()}},d=u,f=(r("9d58"),r("2877")),h=Object(f["a"])(d,a,s,!1,null,"12140526",null);t["default"]=h.exports},c7f1:function(e,t,r){e.exports=r.p+"img/clap-hands.128d5aeb.svg"}}]);
//# sourceMappingURL=chunk-57396c17.e4878e0d.js.map