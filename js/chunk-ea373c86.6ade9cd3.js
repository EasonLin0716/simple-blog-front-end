(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ea373c86"],{9419:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"user__posts",attrs:{id:"profile"}},[a("UserPosts",{attrs:{posts:t.posts,user:t.user,clapCount:t.clapCount},on:{"after-handle-bookmark":t.afterHandleBookmark,"after-handle-unbookmark":t.afterHandleUnbookmark,"after-handle-clap":t.afterHandleClap}})],1)},r=[],i=(a("a4d3"),a("4de4"),a("c975"),a("d81d"),a("a9e3"),a("e439"),a("dbb4"),a("b64b"),a("d3b7"),a("159b"),a("96cf"),a("ade3")),n=a("513f"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"user-posts"}},[a("h5",{attrs:{id:"latest"}},[t._v("Latest")]),t._l(t.posts,(function(e,s){return a("div",{key:e.id},[a("div",{staticClass:"card"},[a("div",{attrs:{id:"info"}},[a("div",{attrs:{id:"user-info"}},[a("div",[a("img",{staticClass:"rounded-circle size-mid",attrs:{src:t.user.avatar,alt:"",id:"avatar"}})]),a("div",[a("h6",[t._v(t._s(t.user.name))]),a("span",[t._v(" "+t._s(e.monthDay)+" • "+t._s(e.readTime)+" ")])])]),a("div",{attrs:{id:"post-info"}},[a("div",{attrs:{id:"cover"}},[a("router-link",{attrs:{to:"/posts/"+e.id,id:"post-link"}},[a("img",{attrs:{src:e.cover,alt:"cover"}})])],1),a("div",{attrs:{id:"content"}},[a("h2",[t._v(t._s(e.title))]),a("article",{domProps:{innerHTML:t._s(e.content)}})]),a("div",{attrs:{id:"icons"}},[a("div",{attrs:{id:"claps"}},[e.clappedTime&&e.isClapped?[e.clappedTime&&e.isClapped?a("button",{class:"clap ind"+s},[a("img",{staticClass:"icon",attrs:{src:t.clapHands,alt:"clap","data-postId":e.id},on:{click:t.handleClap}})]):t._e(),a("span",[t._v(" "+t._s(e.clappedTime))]),a("span",{directives:[{name:"show",rawName:"v-show",value:e.clapping,expression:"post.clapping"}],staticClass:"rounded-circle size-mid",class:"clap-count ind"+s},[t._v(" "+t._s(e.clapping)+" ")])]:e.clappedTime?[a("button",{class:"clap ind"+s},[a("img",{staticClass:"icon",attrs:{src:t.clap,alt:"clap","data-postId":e.id},on:{click:t.handleClap}})]),t._v(" "+t._s(e.clappedTime)+" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.clapping,expression:"post.clapping"}],class:"clap-count ind"+s},[t._v(t._s(e.clapping))])]:[a("button",{class:"clap ind"+s},[a("img",{staticClass:"icon",attrs:{src:t.clap,alt:"clap","data-postId":e.id},on:{click:t.handleClap}})]),a("span",{directives:[{name:"show",rawName:"v-show",value:e.clapping,expression:"post.clapping"}],class:"clap-count ind"+s},[t._v(t._s(e.clapping))])]],2),a("font-awesome-icon",{directives:[{name:"show",rawName:"v-show",value:!e.isBookmarked,expression:"!post.isBookmarked"}],staticClass:"icon icon-mid",attrs:{"data-postId":e.id,icon:["far","bookmark"],disabled:t.isLoading},on:{click:t.handleBookmark}}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isBookmarked,expression:"post.isBookmarked"}],attrs:{"data-postId":e.id}},[a("font-awesome-icon",{staticClass:"icon icon-mid",attrs:{icon:["fas","bookmark"],disabled:t.isLoading},on:{click:t.handleUnbookmark}})],1)],1)])])])])}))],2)},c=[],p=a("2f62");function d(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function l(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?d(Object(a),!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var u=a("0883"),f={name:"UserPosts",props:{posts:{type:Array,required:!0},user:{type:Object,required:!0},clapCount:{type:Number,required:!0}},data:function(){return{clap:a("6f81"),clapHands:a("c7f1"),isLoading:!1}},computed:l({},Object(p["b"])(["currentUser","isAuthenticated"])),mounted:function(){var t=this;setTimeout((function(){for(var e=t.$el.querySelectorAll(".clap"),a=0;a<e.length;a++){var s=e[a];u.clapEffect(s,".clap.ind".concat(a),".clap-count.ind".concat(a))}}),1e3)},methods:{handleBookmark:function(t){this.isLoading=!0;var e="path"===t.target.tagName?t.target.parentNode.dataset:t.target.dataset,a=e.postId;this.$emit("after-handle-bookmark",a),this.isLoading=!1},handleUnbookmark:function(t){this.isLoading=!0;var e=t.target.parentNode.parentNode.dataset.postid||t.target.parentNode.dataset.postid;this.$emit("after-handle-unbookmark",e),this.isLoading=!1},handleClap:function(t){var e=t.target.dataset.postid;this.$emit("after-handle-clap",e)}}},m=f,h=(a("e6fe"),a("2877")),v=Object(h["a"])(m,o,c,!1,null,"5acfff0e",null),b=v.exports,k=a("2fa3");function g(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function O(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?g(Object(a),!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var w={name:"User",components:{UserPosts:b},props:{user:{type:Object,required:!0},posts:{type:Array,required:!0}},data:function(){return{isLoading:!1,clapCount:0,clapTimer:null}},computed:O({},Object(p["b"])(["currentUser","isAuthenticated"])),methods:{afterHandleBookmark:function(t){if(this.isAuthenticated){this.$store.dispatch("addBookmark",t);var e=this.posts.map((function(t){return t.id})).indexOf(+t);this.posts[e].isBookmarked=!0}else k["a"].fire({icon:"info",title:"請登入來使用此功能！"})},afterHandleUnbookmark:function(t){this.$store.dispatch("deleteBookmark",t);var e=this.posts.map((function(t){return t.id})).indexOf(+t);this.posts[e].isBookmarked=!1},afterHandleClap:function(t){var e,a,s=this;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:this.clapTimer&&clearTimeout(this.clapTimer),e=this.posts.map((function(t){return t.id})),a=e.indexOf(Number(t)),this.clapCount+=1,this.posts[a].clappedTime+=1,this.posts[a].clapping+=1,this.clapTimer=setTimeout((function(){var e,r,i;return regeneratorRuntime.async((function(o){while(1)switch(o.prev=o.next){case 0:return o.prev=0,s.isLoading=!0,e={clapCount:s.clapCount},o.next=5,regeneratorRuntime.awrap(n["a"].clap(t,e));case 5:r=o.sent,i=r.data,"success"===i.status&&(k["a"].fire({icon:"success",title:"鼓掌成功!!"}),s.posts[a].isClapped=!0),s.clapCount=0,s.posts[a].clapping=0,s.$forceUpdate(),s.isLoading=!1,o.next=17;break;case 14:o.prev=14,o.t0=o["catch"](0),k["a"].fire({icon:"error",title:"無法鼓掌，請稍後再試！"});case 17:case"end":return o.stop()}}),null,null,[[0,14]])}),2e3);case 7:case"end":return r.stop()}}),null,this)}}},y=w,j=Object(h["a"])(y,s,r,!1,null,null,null);e["default"]=j.exports},d0fa:function(t,e,a){},e6fe:function(t,e,a){"use strict";var s=a("d0fa"),r=a.n(s);r.a}}]);
//# sourceMappingURL=chunk-ea373c86.6ade9cd3.js.map